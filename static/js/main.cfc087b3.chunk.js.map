{"version":3,"sources":["drivers sync nonrecursive //.ts$","drivers/netease.ts","drivers/qq.ts","components/DelayTooltip.tsx","history.ts","app/sider/SonglistItem.tsx","app/sider/SonglistHeader.tsx","app/sider/SonglistFiled.tsx","app/sider/Songlist.tsx","app/sider/Menu.tsx","app/sider/index.tsx","components/Duration.tsx","components/Player/Player.tsx","components/Player/styles.ts","components/Player/index.tsx","app/player/index.tsx","components/SongDetail.tsx","components/SongItem.tsx","components/Snackbar.tsx","app/injected-components.ts","app/layout/index.tsx","app/search/SearchForm.tsx","app/search/SongList.tsx","app/search/ResultItem.tsx","app/search/ResultList.tsx","app/search/index.tsx","components/Panel.tsx","app/songlist/index.tsx","app/playlist/index.tsx","app/oauth/Github.tsx","stores/SearchStore.ts","stores/DriverStore.ts","stores/PlaylistStore.ts","stores/SonglistStore.ts","stores/SnackbarStore.ts","stores/PlayerStore.ts","github/OAuth.ts","github/Helper.ts","github/Sync.ts","stores/GithubStore.ts","app/index.tsx","stores/RootStore.ts","serviceWorker.js","index.tsx"],"names":["map","./netease.ts","./qq.ts","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","cors","Netease","keywords","page","limit","offset","fetch","concat","response","json","result","songCount","songs","list","song","name","album","al","singer","ar","item","duration","dt","driver","title","total","data","url","QQ","totalnum","mid","interval","DelayTooltip","_ref","children","react_default","a","createElement","index_es","enterDelay","leaveDelay","history","basename","process","styles","createStyles","songlistitem","& .delete","display","&:hover .delete","SonglistItem","handleClick","push","_this","props","handleDelete","onDelete","_this$props","this","classes","button","onClick","ContainerProps","className","primary","components_DelayTooltip","icons_index_es","fontSize","React","Component","withStyles","@keyframes rotate","from","transform","to","syncing","animation","onAdd","onSync","SonglistFiled","state","value","done","onDone","onHide","handleSubmit","preventDefault","handleInputChange","setState","target","handleDoneClick","handleCancelClick","onSubmit","placeholder","autoFocus","onChange","Songlist","observer","add","handleShowAdd","handleSync","githubStore","token","sync","window","open","basepath","handleHideAdd","handleAddDone","songlistStore","createSonglist","confirm","deleteSonglist","_this2","songlists","subheader","sider_SonglistHeader","component","sider_SonglistFiled","flag","sider_SonglistItem","key","inject","Menu","sider","divider","backgroundColor","sider_Menu","sider_Songlist","Duration","full","v","dateTime","Date","m","getMinutes","s","getSeconds","time","ModeIcons","single","RepeatOne","Repeat","order","List","random","Shuffle","Player","audio","audioReadied","progressTimeout","mounted","whoChangedCurrentTime","whoChangedPaused","progressSliderDragging","modes","initAudio","currentTime","volume","muted","progress","src","onCurrentTimeChange","setTimeout","handlePausedOrPlayButtonClick","onPausedChange","paused","handleAudioCanPlayThrough","onDurationChange","handleAudioPlay","handleAudioEnd","onPlayNext","handleDurationSliderChange","handleDurationSliderDragStart","handleDurationSliderDragEnd","handleNextButtonClick","handlePrevButtonClick","onPlayPrev","handleModeButtonClick","currentModeIndex","indexOf","mode","nextModeIndex","length","nextMode","onModeChange","handleVolumeSliderChange","onVolumeChange","handleMutedButtionClick","onMutedChange","clearInterval","prevProps","prevState","snapshot","pause","play","_this$props2","ModeIcon","wrapper","audioWrapper","controls","autoPlay","ref","onPlay","onEnded","onCanPlayThrough","player","mainControl","info","mainSliderTitle","components_Duration","mainSliderWrapper","lab_index_es","min","max","onDragStart","onDragEnd","secondaryControl","volumeSlider","theme","width","boxShadow","alignItems","padding","height","flex","justifyContent","marginBottom","PlayerObservered","playerStore","currentSong","join","playPrev","bind","playNext","changeMode","changePaused","changeMuted","changeVolume","changeDuration","changeCurrentTime","SongDetail","songDetail","& b","fontWeight","& i,& small","marginLeft","variant","noWrap","SongItem","menu","anchorEl","handleAdd","handleCloseMenu","handlePlay","handleAddToPlaylist","onAddToPlaylist","handleAddToSonglist","_this$props3","onAddToSonglist","_this$props4","extendAction","showPlaylistOnMenu","hideDriver","listitem","size","secondary","components_SongDetail","buttonRef","node","onClose","cursor","borderBottom","color","variantIcon","success","CheckCircle","warning","Warning","error","ErrorIcon","Info","green","palette","dark","amber","icon","iconVariant","opacity","marginRight","spacing","unit","message","onExited","Icon","ContentProps","anchorOrigin","vertical","horizontal","autoHideDuration","_onClose","_x","_x2","apply","arguments","toString","event","reason","classNames","action","aria-label","SongItemInjected","playlistStore","snackbarStore","pushSonglist","PlaylistItemInjected","_ref2","SnackbarObservered","Snackbar","SnackbarInjected","_ref3","close","show","Layout","main","sidebar","content","minWidth","position","borderRight","bottom","left","search","textAlign","input","SearchForm","handleChange","InputProps","startAdornment","label","searchStore","setKeyowrds","SongList","resultItem","header","ResultItem","searching","search_SongList","ObserverResultList","results","resultList","search_ResultItem","StyledObserverResultList","Search","search_SearchForm","search_ResultList","actions","&>*","getSonglistTitle","match","params","getSonglist","find","handlePlayAllClick","songlist","onPlayAll","items","handleAddToPlaylistClick","onRemove","components_Panel","Link","append","popSonglist","Playlist","onClear","index","availableSongs","clear","remove","Github","location","authorizeURL","getAccessToken","qs","parse","then","opener","baiyezi_music_store","oauthSuccess","replace","style","marginTop","SearchResult","SearchStore_class","classCallCheck","initializerDefineProperty","_descriptor","_descriptor2","_descriptor3","_descriptor4","applyDecoratedDescriptor","prototype","observable","configurable","enumerable","writable","initializer","SearchStore","root","_descriptor5","_descriptor6","runDriver","flow","regenerator_default","mark","_callee","wrap","_context","prev","next","instance","sent","stop","keyowrds","driverStore","drivers","forEach","d","DriverStore","scanDrivers","context","require","DriverClass","default","PlaylistStore","PlaylistStore_descriptor","storageKey","load","autorun","save","filter","playlistJSON","JSON","stringify","localStorage","setItem","getItem","saveData","undefined","oldIndex","findIndex","playIndex","playlistIndex","i","fetchSrc","SonglistStore","SonglistStore_descriptor","songlistsStorageKey","songlistsJSON","some","oldTitle","newTitle","pl","sl","sli","SnackbarStore","SnackbarStore_descriptor","SnackbarStore_descriptor2","SnackbarStore_descriptor3","SnackbarStore_descriptor4","queue","valueOf","shift","PlayerStore","PlayerStore_descriptor","PlayerStore_descriptor2","PlayerStore_descriptor3","PlayerStore_descriptor4","PlayerStore_descriptor5","PlayerStore_descriptor6","_descriptor7","_descriptor8","observe","change","playlist","playerJSON","playlistLength","Math","round","OAuth","clientID","clientSecret","redirectURL","scope","authorize","access_token","cross_origin","queryString","client_id","query","client_secret","getAccessTokenURL","text","responseText","GithubHelper","github","description","files","getGist","create","public","gist","update","getUser","listGists","myGists","g","read","Sync","helper","storeName","storeGistID","Helper","createGist","playlist.json","songlist.json","store","findGistById","findMyGistByDescription","createStore","local","getStore","remote","merged","mergeSongs","updateGistFiles","mergeSonglists","merge","b","remoteItems","r","deleted","splice","GithubStore","oauth","githubSync","GithubStore_descriptor","GithubStore_descriptor2","syncPlaylist","syncSonglist","_callee2","_context2","abrupt","getAuthorizeURL","GithubSync","RootStore","createMuiTheme","typography","useNextVariants","Boolean","hostname","ReactDOM","render","index_module","Router","Switch","Route","path","core_styles","layout","Redirect","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cfc087b3.chunk.js","sourcesContent":["var map = {\n\t\"./netease.ts\": 5618,\n\t\"./qq.ts\": 5619\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 5617;","import { ISong, IDriver, ISearchResult } from '../interface'\nconst cors = `https://cros.662.workers.dev/`\n\nexport default class Netease implements IDriver {\n    static title = '网易'\n\n    async search(keywords: string, page: number, limit: number): Promise<ISearchResult> {\n        const offset = (page - 1) * limit\n        const response = await fetch(`${cors}https://music.163.com/api/cloudsearch/pc?s=${keywords}&type=1&offset=${offset}&limit=${limit}`)\n        const { result } = await response.json()\n        const { songCount, songs } = result\n\n        const list: ISong[] = songs.map((song: any) => ({\n            id: song.id,\n            name: song.name,\n            album: { id: song.al.id, name: song.al.name },\n            singer: song.ar.map((item: any) => ({ id: item.id, name: item.name })),\n            duration: song.dt,\n            driver: Netease.title,\n        }))\n\n        return {\n            list,\n            total: songCount,\n        }\n    }\n    async find(id: string | number): Promise<string> {\n        const response = await fetch(`${cors}https://music.163.com/api/song/enhance/player/url?ids=[${id}]&br=320000`)\n        const { data } = await response.json()\n        return data[0].url\n    }\n}\n","import { ISong, IDriver, ISearchResult } from '../interface'\nconst cors = `https://cros.662.workers.dev/`\n\nexport default class QQ implements IDriver {\n    static title = 'QQ'\n\n    async search(keywords: string, page: number, limit: number): Promise<ISearchResult> {\n        const response = await fetch(\n            `${cors}https://c.y.qq.com/soso/fcgi-bin/client_search_cp?p=${page}&n=${limit}&w=${keywords}&format=json&new_json=1&cr=1`\n        )\n        const { data } = await response.json()\n        const { totalnum, list } = data.song\n\n        const songs: ISong[] = list.map((song: any) => ({\n            id: song.mid,\n            name: song.name,\n            album: { id: song.album.id, name: song.album.name },\n            singer: song.singer.map((item: any) => ({ id: item.id, name: item.name })),\n            duration: song.interval * 1000,\n            driver: QQ.title,\n        }))\n\n        return {\n            list: songs,\n            total: totalnum,\n        }\n    }\n    async find(id: string | number): Promise<string> {\n        return `https://api.bzqll.com/music/tencent/url?key=579621905&id=${id}&br=320`\n    }\n}\n","import React from 'react'\nimport { Tooltip } from '@material-ui/core'\n\ninterface DelayTooltipProps {\n    title: string\n    children: React.ReactElement<any>\n}\n\nfunction DelayTooltip({ title, children }: DelayTooltipProps) {\n    return (\n        <Tooltip title={title} enterDelay={500} leaveDelay={200}>\n            {children}\n        </Tooltip>\n    )\n}\n\nexport default DelayTooltip\n","import * as history from 'history'\n\nexport default history.createBrowserHistory({ basename: process.env.PUBLIC_URL || '/' })\n","import React from 'react'\nimport { ListItem, ListItemText, IconButton, createStyles, withStyles, WithStyles, ListItemSecondaryAction } from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\nimport DelayTooltip from '../../components/DelayTooltip'\nimport history from '../../history'\n\nconst styles = createStyles({\n    songlistitem: {\n        '& .delete': {\n            display: 'none',\n        },\n        '&:hover .delete': {\n            display: 'block',\n        },\n    },\n})\n\ninterface SonglistItemProps extends WithStyles<typeof styles> {\n    title: string\n    onDelete(title: string): void\n}\n\nclass SonglistItem extends React.Component<SonglistItemProps> {\n    handleClick = () => history.push(`/songlist/${this.props.title}`)\n    handleDelete = () => this.props.onDelete(this.props.title)\n\n    render() {\n        const { title, classes } = this.props\n        return (\n            <ListItem button onClick={this.handleClick} ContainerProps={{ className: classes.songlistitem }}>\n                <ListItemText primary={title} />\n                <ListItemSecondaryAction className=\"delete\">\n                    <DelayTooltip title=\"删除\">\n                        <IconButton onClick={this.handleDelete}>\n                            <Delete fontSize=\"small\" />\n                        </IconButton>\n                    </DelayTooltip>\n                </ListItemSecondaryAction>\n            </ListItem>\n        )\n    }\n}\n\nexport default withStyles(styles)(SonglistItem)\n","import React, { MouseEventHandler } from 'react'\nimport { ListSubheader, IconButton, ListItemSecondaryAction } from '@material-ui/core'\nimport { createStyles, withStyles } from '@material-ui/core'\nimport { WithStyles } from '@material-ui/core'\n\nimport DelayTooltip from '../../components/DelayTooltip'\nimport { Add, Sync } from '@material-ui/icons'\n\nconst styles = createStyles({\n    '@keyframes rotate': {\n        from: { transform: 'rotate(0deg)' },\n        to: { transform: 'rotate(360deg)' },\n    },\n    syncing: {\n        animation: `rotate 1s linear 0s infinite`,\n    },\n})\n\ninterface SonglistHeaderProps extends WithStyles<typeof styles> {\n    onAdd: MouseEventHandler\n    onSync: MouseEventHandler\n    syncing: boolean\n}\n\nconst SonglistHeader = ({ onAdd, onSync, syncing, classes }: SonglistHeaderProps) => (\n    <ListSubheader>\n        <span>我的歌单</span>\n        <ListItemSecondaryAction>\n            <DelayTooltip title=\"同步\">\n                <IconButton onClick={onSync} className={syncing ? classes.syncing : ''}>\n                    <Sync fontSize=\"small\" />\n                </IconButton>\n            </DelayTooltip>\n            <DelayTooltip title=\"新建歌单\">\n                <IconButton onClick={onAdd}>\n                    <Add fontSize=\"small\" />\n                </IconButton>\n            </DelayTooltip>\n        </ListItemSecondaryAction>\n    </ListSubheader>\n)\n\nexport default withStyles(styles)(SonglistHeader)\n","import React, { ChangeEventHandler, FormEventHandler, MouseEventHandler } from 'react'\nimport { ListItem, Input, IconButton } from '@material-ui/core'\nimport { Cancel, Done } from '@material-ui/icons'\nimport DelayTooltip from '../../components/DelayTooltip'\n\ninterface SonglistFiledProps {\n    onHide(): void\n    onDone(v: string): void\n}\n\nclass SonglistFiled extends React.Component<SonglistFiledProps> {\n    state = {\n        value: '',\n    }\n\n    done = () => {\n        this.props.onDone(this.state.value)\n        this.props.onHide()\n    }\n    handleSubmit: FormEventHandler<HTMLFormElement> = e => {\n        e.preventDefault()\n        this.done()\n    }\n    handleInputChange: ChangeEventHandler<HTMLInputElement> = e => this.setState({ value: e.target.value })\n    handleDoneClick: MouseEventHandler = e => this.done()\n    handleCancelClick: MouseEventHandler = e => this.props.onHide()\n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}>\n                <ListItem>\n                    <Input placeholder=\"歌单名\" autoFocus value={this.state.value} onChange={this.handleInputChange} />\n                    <DelayTooltip title=\"创建\">\n                        <IconButton onClick={this.handleDoneClick}>\n                            <Done fontSize=\"small\" />\n                        </IconButton>\n                    </DelayTooltip>\n                    <DelayTooltip title=\"取消\">\n                        <IconButton onClick={this.handleCancelClick}>\n                            <Cancel fontSize=\"small\" />\n                        </IconButton>\n                    </DelayTooltip>\n                </ListItem>\n            </form>\n        )\n    }\n}\n\nexport default SonglistFiled\n","import React, { MouseEventHandler } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { List } from '@material-ui/core'\n\nimport SonglistStore from '../../stores/SonglistStore'\nimport GithubStore from '../../stores/GithubStore'\nimport SonglistItem from './SonglistItem'\nimport SonglistHeader from './SonglistHeader'\nimport SonglistFiled from './SonglistFiled'\n\ninterface SonglistProps {\n    songlistStore: SonglistStore\n    githubStore: GithubStore\n}\n\n@observer\nclass Songlist extends React.Component<SonglistProps> {\n    state = {\n        add: false,\n    }\n    handleShowAdd: MouseEventHandler = e => this.setState({ add: true })\n    handleSync: MouseEventHandler = e => {\n        const { githubStore } = this.props\n        const basepath = process.env.PUBLIC_URL || '/'\n        githubStore.token ? githubStore.sync() : window.open(basepath + '/oauth/github')\n    }\n    handleHideAdd = () => this.setState({ add: false })\n    handleAddDone = (value: string) => this.props.songlistStore.createSonglist(value)\n    handleDelete = (title: string) => {\n        const agree = confirm('删除歌单将无法恢复！\\n继续？')\n        agree && this.props.songlistStore.deleteSonglist(title)\n    }\n\n    render() {\n        const { songlistStore, githubStore } = this.props\n        const { songlists } = songlistStore\n        const { add } = this.state\n        return (\n            <List subheader={<SonglistHeader syncing={githubStore.syncing} onAdd={this.handleShowAdd} onSync={this.handleSync} />} component=\"nav\">\n                {add && <SonglistFiled onDone={this.handleAddDone} onHide={this.handleHideAdd} />}\n                {songlists.map(item => item.flag !== 'deleted' && <SonglistItem key={item.title} title={item.title} onDelete={this.handleDelete} />)}\n            </List>\n        )\n    }\n}\n\nexport default inject(({ songlistStore, githubStore }) => ({ songlistStore, githubStore }))(Songlist)\n","import React from 'react'\nimport { List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core'\nimport { Search, PlaylistPlay } from '@material-ui/icons'\nimport history from '../../history'\n\nconst Menu = () => {\n    return (\n        <List component=\"nav\">\n            <ListItem button onClick={e => history.push('/search')}>\n                <ListItemIcon>\n                    <Search />\n                </ListItemIcon>\n                <ListItemText primary=\"搜索歌曲\" />\n            </ListItem>\n            <ListItem button onClick={e => history.push('/playlist')}>\n                <ListItemIcon>\n                    <PlaylistPlay />\n                </ListItemIcon>\n                <ListItemText primary=\"播放列表\" />\n            </ListItem>\n        </List>\n    )\n}\n\nexport default Menu\n","import React from 'react'\nimport { Divider, withStyles, WithStyles, createStyles } from '@material-ui/core'\n\nimport Songlist from './Songlist'\nimport Menu from './Menu'\n\nconst styles = createStyles({\n    sider: {},\n    divider: {\n        backgroundColor: '#ddd',\n    },\n})\n\nconst Sider = ({ classes }: WithStyles<typeof styles>) => (\n    <div className={classes.sider}>\n        <Menu />\n        <Divider className={classes.divider} />\n        <Songlist />\n    </div>\n)\n\nexport default withStyles(styles)(Sider)\n","import React from 'react'\n\nconst Duration = ({ value }: { value: number }) => {\n    function full(v: number) {\n        return v < 10 ? '0' + v : v\n    }\n    const dateTime = new Date(value)\n    const m = dateTime.getMinutes()\n    const s = dateTime.getSeconds()\n    const time = full(m) + ':' + full(s)\n    return <small>{time}</small>\n}\n\nexport default Duration\n","import React from 'react'\nimport { IconButton } from '@material-ui/core'\nimport { Slider } from '@material-ui/lab'\nimport { SkipNext, SkipPrevious, PlayArrow, Pause, VolumeUp, VolumeOff, SaveAlt, Repeat, RepeatOne, List, Shuffle } from '@material-ui/icons'\nimport Duration from '../Duration'\nimport PlayerProps from './PlayerProps'\n\nconst ModeIcons: {\n    [key: string]: any\n} = {\n    single: RepeatOne,\n    list: Repeat,\n    order: List,\n    random: Shuffle,\n}\n\nexport default class Player extends React.Component<PlayerProps> {\n    audio: HTMLAudioElement | null = null\n    audioReadied: boolean = false\n    progressTimeout?: NodeJS.Timeout\n    mounted: boolean = false\n    whoChangedCurrentTime: 'player' | 'audio' = 'audio'\n    whoChangedPaused: 'player' | 'audio' = 'audio'\n    progressSliderDragging: boolean = false\n    modes: string[] = ['single', 'list', 'order', 'random']\n\n    componentDidMount() {\n        this.mounted = true\n        this.initAudio()\n        this.progress()\n    }\n    componentWillUnmount() {\n        this.progressTimeout && clearInterval(this.progressTimeout)\n    }\n    componentDidUpdate(prevProps: PlayerProps, prevState: any, snapshot: any) {\n        const audio = this.audio\n        const props = this.props\n        if (audio) {\n            if (props.muted !== prevProps.muted) {\n                audio.volume = props.muted ? 0 : props.volume / 100\n            }\n            if (props.paused !== prevProps.paused && this.whoChangedPaused === 'player') {\n                props.paused ? audio.pause() : audio.play()\n            }\n            if (props.volume !== prevProps.volume) {\n                audio.volume = props.volume / 100\n            }\n            if (props.currentTime !== prevProps.currentTime && this.whoChangedCurrentTime === 'player' && !this.progressSliderDragging) {\n                audio.currentTime = props.currentTime\n            }\n            this.whoChangedPaused = 'audio'\n            this.whoChangedCurrentTime = 'audio'\n        }\n    }\n\n    initAudio = () => {\n        const audio = this.audio\n        if (audio) {\n            // 初始化 播放进度\n            audio.currentTime = this.props.currentTime\n            // 初始化 音量\n            audio.volume = this.props.muted ? 0 : this.props.volume / 100\n        }\n    }\n    progress = () => {\n        if (this.props.src && this.audio && this.audioReadied && !this.progressSliderDragging) {\n            this.props.onCurrentTimeChange(this.audio.currentTime)\n            this.whoChangedCurrentTime = 'audio'\n        }\n        this.progressTimeout = setTimeout(this.progress, 200)\n    }\n\n    handlePausedOrPlayButtonClick = () => {\n        this.props.onPausedChange(!this.props.paused)\n        this.whoChangedPaused = 'player'\n    }\n    handleAudioCanPlayThrough = () => {\n        this.audioReadied = true\n        if (!this.mounted) return\n        // 获取当前音频的长度\n        this.props.onDurationChange(this.audio!.duration)\n    }\n    handleAudioPlay = () => {\n        this.props.onPausedChange(false)\n        this.whoChangedPaused = 'audio'\n    }\n    handleAudioEnd = () => {\n        this.props.onPlayNext()\n        this.props.onPausedChange(true)\n        this.whoChangedPaused = 'audio'\n    }\n    handleDurationSliderChange = (e: React.ChangeEvent<{}>, v: number) => {\n        this.props.onCurrentTimeChange(v)\n        this.whoChangedCurrentTime = 'player'\n    }\n    handleDurationSliderDragStart = () => {\n        this.progressSliderDragging = true\n    }\n    handleDurationSliderDragEnd = () => {\n        this.progressSliderDragging = false\n        this.audio!.currentTime = this.props.currentTime\n    }\n    handleNextButtonClick = () => {\n        this.props.onPlayNext()\n        this.whoChangedCurrentTime = 'player'\n    }\n    handlePrevButtonClick = () => {\n        this.props.onPlayPrev()\n        this.whoChangedCurrentTime = 'player'\n    }\n    handleModeButtonClick = () => {\n        const currentModeIndex = this.modes.indexOf(this.props.mode)\n        const nextModeIndex = currentModeIndex === this.modes.length - 1 ? 0 : currentModeIndex + 1\n        const nextMode = this.modes[nextModeIndex] as 'single' | 'list' | 'order' | 'random'\n        this.props.onModeChange(nextMode)\n    }\n    handleVolumeSliderChange = (e: React.ChangeEvent<{}>, v: number) => {\n        this.props.onVolumeChange(v)\n    }\n    handleMutedButtionClick = () => {\n        this.props.onMutedChange(!this.props.muted)\n    }\n    render() {\n        const { classes } = this.props\n        const { paused, muted, volume, duration, currentTime, mode } = this.props\n        const { src, song, singer } = this.props\n        const ModeIcon = ModeIcons[mode]\n        return (\n            <div className={classes.wrapper}>\n                <div className={classes.audioWrapper}>\n                    {src && (\n                        <audio\n                            controls\n                            autoPlay\n                            ref={audio => (this.audio = audio)}\n                            className={classes.audio}\n                            src={src}\n                            onPlay={this.handleAudioPlay}\n                            onEnded={this.handleAudioEnd}\n                            onCanPlayThrough={this.handleAudioCanPlayThrough}\n                        >\n                            您的浏览器不支持 video 标签。\n                        </audio>\n                    )}\n                </div>\n                <div className={classes.player}>\n                    <div className={classes.mainControl}>\n                        <IconButton onClick={this.handlePrevButtonClick}>\n                            <SkipPrevious fontSize=\"large\" />\n                        </IconButton>\n                        <IconButton onClick={this.handlePausedOrPlayButtonClick}>\n                            {paused ? <PlayArrow fontSize=\"large\" /> : <Pause fontSize=\"large\" />}\n                        </IconButton>\n                        <IconButton onClick={this.handleNextButtonClick}>\n                            <SkipNext fontSize=\"large\" />\n                        </IconButton>\n                    </div>\n                    <div className={classes.info}>\n                        <div className={classes.mainSliderTitle}>\n                            <div>\n                                {song} - {singer}\n                            </div>\n                            <div>\n                                <Duration value={currentTime * 1000} /> /\n                                <Duration value={duration * 1000} />\n                            </div>\n                        </div>\n                        <div className={classes.mainSliderWrapper}>\n                            <Slider\n                                min={0}\n                                max={duration}\n                                value={currentTime}\n                                onChange={this.handleDurationSliderChange}\n                                onDragStart={this.handleDurationSliderDragStart}\n                                onDragEnd={this.handleDurationSliderDragEnd}\n                            />\n                        </div>\n                    </div>\n                    <div>\n                        <IconButton>\n                            <SaveAlt />\n                        </IconButton>\n                        <IconButton onClick={this.handleModeButtonClick}>\n                            <ModeIcon />\n                        </IconButton>\n                    </div>\n                    <div className={classes.secondaryControl}>\n                        <IconButton onClick={this.handleMutedButtionClick}>{muted ? <VolumeOff /> : <VolumeUp />}</IconButton>\n                        <div className={classes.volumeSlider}>\n                            <Slider min={0} max={100} value={volume} onChange={this.handleVolumeSliderChange} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n","import { createStyles, Theme } from '@material-ui/core'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        wrapper: {\n            width: '100%',\n            backgroundColor: '#fafafa',\n            boxShadow: '0px 0px 4px #ddd',\n        },\n        audioWrapper: {\n            display: 'none',\n        },\n        player: {\n            display: 'flex',\n            alignItems: 'center',\n            padding: '4px 16px',\n        },\n        audio: {\n            width: '100%',\n            height: '48px',\n            backgroundColor: 'rgb(241,243,244)',\n        },\n        mainControl: {},\n        info: {\n            padding: '16px',\n            flex: 1,\n        },\n        secondaryControl: {\n            display: 'flex',\n            alignItems: 'center',\n        },\n        volumeSlider: {\n            width: '100px',\n        },\n        mainSliderTitle: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            marginBottom: '8px',\n            fontSize: '12px',\n        },\n        mainSliderWrapper: {\n            flex: 1,\n        },\n    })\n\nexport default styles\n","import { withStyles } from '@material-ui/core'\nimport Player from './Player'\nimport styles from './styles'\n\nexport default withStyles(styles)(Player)\n","import React from 'react'\nimport { inject, observer } from 'mobx-react'\nimport Player from '../../components/Player'\n\nconst PlayerObservered = observer(Player)\nexport default inject(({ playerStore }) => ({\n    src: playerStore.src,\n    song: playerStore.currentSong ? playerStore.currentSong.name : '',\n    singer: playerStore.currentSong ? playerStore.currentSong.singer.map(s => s.name).join('&') : '',\n\n    paused: playerStore.paused,\n    muted: playerStore.muted,\n    volume: playerStore.volume,\n    duration: playerStore.duration,\n    currentTime: playerStore.currentTime,\n    mode: playerStore.mode,\n\n    onPlayPrev: playerStore.playPrev.bind(playerStore),\n    onPlayNext: playerStore.playNext.bind(playerStore),\n    onModeChange: playerStore.changeMode.bind(playerStore),\n    onPausedChange: playerStore.changePaused.bind(playerStore),\n    onMutedChange: playerStore.changeMuted.bind(playerStore),\n    onVolumeChange: playerStore.changeVolume.bind(playerStore),\n    onDurationChange: playerStore.changeDuration.bind(playerStore),\n    onCurrentTimeChange: playerStore.changeCurrentTime.bind(playerStore),\n}))(PlayerObservered)\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { withStyles, createStyles, Typography, WithStyles, Theme } from '@material-ui/core'\nimport Duration from './Duration'\n\nimport { ISong } from '../interface'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        songDetail: {\n            '& b': {\n                fontWeight: 'normal',\n            },\n            '& i,& small': {\n                marginLeft: '8px',\n            },\n        },\n    })\n\ninterface SongDetailProps extends WithStyles<typeof styles> {\n    song: ISong\n}\n\nconst SongDetail = withStyles(styles)(\n    observer(({ song, classes }: SongDetailProps) => (\n        <Typography variant=\"inherit\" noWrap className={classes.songDetail}>\n            <b>{song.singer.map(s => s.name).join('&')}</b>\n            <Duration value={song.duration} />\n            {song.album.name && <i title={`《${song.album.name}》`}>《{song.album.name}》</i>}\n        </Typography>\n    ))\n)\n\nexport default SongDetail\n","import React, { MouseEventHandler } from 'react'\n\nimport { Typography, Divider, ListItemIcon, ListItem, ListItemText, ListItemSecondaryAction, IconButton, MenuItem, Fab, Menu } from '@material-ui/core'\nimport { withStyles, createStyles } from '@material-ui/core'\nimport { WithStyles, Theme } from '@material-ui/core'\nimport { Add, PlayArrow } from '@material-ui/icons'\n\nimport DelayTooltip from './DelayTooltip'\nimport SongDetail from './SongDetail'\n\nimport { ISong, ISonglist } from '../interface'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        listitem: {\n            cursor: 'default',\n            borderBottom: 'dashed 1px #ddd',\n        },\n        driver: {\n            marginLeft: '8px',\n            color: '#999',\n            fontSize: '12px',\n        },\n    })\n\ninterface SongItemProps extends WithStyles<typeof styles> {\n    showPlaylistOnMenu: boolean\n    song: ISong\n    songlists: ISonglist[]\n    onPlay(song: ISong): void\n    onAddToPlaylist(song: ISong): void\n    onAddToSonglist(title: string, song: ISong): void\n    extendAction?: React.ReactNode\n    hideDriver?: boolean\n}\n\ninterface SongItemState {\n    menu: boolean\n}\n\nclass SongItem extends React.Component<SongItemProps, SongItemState> {\n    state = {\n        menu: false,\n    }\n    anchorEl: any = null\n\n    handleAdd: MouseEventHandler = e => this.setState({ menu: true })\n    handleCloseMenu = () => this.setState({ menu: false })\n\n    handlePlay: MouseEventHandler = e => {\n        const { onPlay, song } = this.props\n        onPlay(song)\n    }\n    handleAddToPlaylist: MouseEventHandler = e => {\n        const { onAddToPlaylist, song } = this.props\n        onAddToPlaylist(song)\n        this.handleCloseMenu()\n    }\n    handleAddToSonglist = (title: string) => {\n        const { onAddToSonglist, song } = this.props\n        onAddToSonglist(title, song)\n        this.handleCloseMenu()\n    }\n\n    render() {\n        const { song, classes, songlists, extendAction, showPlaylistOnMenu, hideDriver } = this.props\n        const { menu } = this.state\n\n        return (\n            <ListItem ContainerProps={{ className: classes.listitem }}>\n                <ListItemIcon>\n                    <DelayTooltip title=\"播放\">\n                        <Fab size=\"small\" onClick={this.handlePlay}>\n                            <PlayArrow />\n                        </Fab>\n                    </DelayTooltip>\n                </ListItemIcon>\n                <ListItemText\n                    primary={\n                        <Typography variant=\"inherit\" noWrap>\n                            {song.name}\n                            {!hideDriver && <small className={classes.driver}>[{song.driver}]</small>}\n                        </Typography>\n                    }\n                    secondary={<SongDetail song={song} />}\n                />\n                <ListItemSecondaryAction>\n                    <IconButton buttonRef={node => (this.anchorEl = node)} onClick={this.handleAdd}>\n                        <Add fontSize=\"small\" />\n                    </IconButton>\n                    <Menu open={menu} anchorEl={this.anchorEl} onClose={this.handleCloseMenu}>\n                        {showPlaylistOnMenu && <MenuItem onClick={this.handleAddToPlaylist}>播放列表</MenuItem>}\n                        {showPlaylistOnMenu && <Divider />}\n                        {songlists.map(item => (\n                            <MenuItem key={item.title} onClick={e => this.handleAddToSonglist(item.title)}>\n                                {item.title}\n                            </MenuItem>\n                        ))}\n                    </Menu>\n                    {extendAction}\n                </ListItemSecondaryAction>\n            </ListItem>\n        )\n    }\n}\n\nexport default withStyles(styles)(SongItem)\n","import React from 'react'\nimport classNames from 'classnames'\nimport { Snackbar as MSnackbar, IconButton } from '@material-ui/core'\nimport { createStyles, withStyles } from '@material-ui/core'\nimport { Theme, WithStyles } from '@material-ui/core'\nimport { Close, CheckCircle, Warning, Error as ErrorIcon, Info } from '@material-ui/icons'\nimport { green, amber } from '@material-ui/core/colors'\nimport { SnackbarVariant } from '../interface'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        success: {\n            backgroundColor: green[600],\n        },\n        error: {\n            backgroundColor: theme.palette.error.dark,\n        },\n        info: {\n            backgroundColor: theme.palette.primary.dark,\n        },\n        warning: {\n            backgroundColor: amber[700],\n        },\n        icon: {\n            fontSize: 20,\n        },\n        iconVariant: {\n            opacity: 0.9,\n            marginRight: theme.spacing.unit,\n        },\n        message: {\n            display: 'flex',\n            alignItems: 'center',\n        },\n    })\n\nconst variantIcon = {\n    success: CheckCircle,\n    warning: Warning,\n    error: ErrorIcon,\n    info: Info,\n}\n\ninterface SnackbarProps extends WithStyles<typeof styles> {\n    key: number\n    open: boolean\n    message: string\n    onClose(): void\n    onExited(): void\n    variant: SnackbarVariant\n}\n\nconst Snackbar = ({ key, open, message, onClose, variant, classes, onExited }: SnackbarProps) => {\n    const Icon = variantIcon[variant]\n    return (\n        <MSnackbar\n            key={key}\n            ContentProps={{ className: classes[variant] }}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}\n            open={open}\n            autoHideDuration={3000}\n            onClose={(event, reason) => {\n                if (reason === 'clickaway') return\n                onClose()\n            }}\n            onExited={onExited}\n            message={\n                <span className={classes.message}>\n                    <Icon className={classNames(classes.icon, classes.iconVariant)} />\n                    {message}\n                </span>\n            }\n            action={[\n                <IconButton key=\"close\" aria-label=\"Close\" color=\"inherit\" onClick={onClose}>\n                    <Close className={classes.icon} />\n                </IconButton>,\n            ]}\n        />\n    )\n}\n\nexport default withStyles(styles)(Snackbar)\n","import { observer, inject } from 'mobx-react'\nimport SongItem from '../components/SongItem'\nimport Snackbar from '../components/Snackbar'\nimport { ISong } from '../interface'\n\n// const SongItemObservered = observer(SongItem);\nconst SongItemInjected = inject(({ playlistStore, songlistStore, snackbarStore }) => ({\n    showPlaylistOnMenu: true,\n    songlists: songlistStore.songlists,\n    onPlay: (song: ISong) => {\n        playlistStore.add(song, true)\n        snackbarStore.success(`《${song.name}》已添加到 {播放列表}`)\n    },\n    onAddToPlaylist: (song: ISong) => {\n        playlistStore.add(song)\n        snackbarStore.success(`《${song.name}》已添加到 {播放列表}`)\n    },\n    onAddToSonglist: (title: string, song: ISong) => {\n        songlistStore.pushSonglist(title, song)\n        snackbarStore.success(`《${song.name}》已添加到 {${title}}`)\n    },\n}))(SongItem)\n\nconst PlaylistItemInjected = inject(({ playlistStore, songlistStore, snackbarStore }) => ({\n    showPlaylistOnMenu: false,\n    songlists: songlistStore.songlists,\n    onPlay: (song: ISong) => {\n        playlistStore.add(song, true)\n    },\n    onAddToPlaylist: (song: ISong) => {\n        playlistStore.add(song)\n        snackbarStore.success(`《${song.name}》已添加到 {播放列表}`)\n    },\n    onAddToSonglist: (title: string, song: ISong) => {\n        songlistStore.pushSonglist(title, song)\n        snackbarStore.success(`《${song.name}》已添加到 {${title}}`)\n    },\n}))(SongItem)\n\nconst SnackbarObservered = observer(Snackbar)\nconst SnackbarInjected = inject(({ snackbarStore }) => ({\n    key: snackbarStore.key,\n    open: snackbarStore.open,\n    variant: snackbarStore.variant,\n    message: snackbarStore.message,\n    onClose: () => snackbarStore.close(),\n    onExited: () => snackbarStore.show(),\n}))(SnackbarObservered)\n\nexport { SongItemInjected, PlaylistItemInjected, SnackbarInjected }\n","import React from 'react'\nimport { CssBaseline } from '@material-ui/core'\nimport { withStyles, createStyles } from '@material-ui/core'\nimport { WithStyles, Theme } from '@material-ui/core'\nimport Sider from '../sider'\nimport Player from '../player'\nimport { SnackbarInjected } from '../injected-components'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        wrapper: {\n            minWidth: '960px',\n        },\n        main: {\n            display: 'flex',\n        },\n        sidebar: {\n            position: 'fixed',\n            width: '240px',\n            height: 'calc(100vh - 67px)',\n            borderRight: 'solid 1px #ddd',\n        },\n        content: { width: '100%', padding: '24px 24px 0 24px', marginLeft: '240px', marginBottom: '48px' },\n        player: {\n            position: 'fixed',\n            bottom: 0,\n            left: 0,\n            width: '100%',\n            minWidth: '960px',\n        },\n    })\n\ninterface LayoutProps extends WithStyles<typeof styles> {\n    children: React.ReactChild | React.ReactChild[]\n}\nclass Layout extends React.Component<LayoutProps> {\n    render() {\n        const { children, classes } = this.props\n        return (\n            <div className={classes.wrapper}>\n                <CssBaseline />\n                <div className={classes.main}>\n                    <div className={classes.sidebar}>\n                        <Sider />\n                    </div>\n                    <div className={classes.content}>{children}</div>\n                </div>\n                <div className={classes.player}>\n                    <Player />\n                </div>\n                <SnackbarInjected />\n            </div>\n        )\n    }\n}\n\nexport default withStyles(styles)(Layout)\n","import React, { Component, FormEventHandler, ChangeEventHandler } from 'react'\nimport { inject, observer } from 'mobx-react'\n\nimport { TextField, withStyles, WithStyles, createStyles, InputAdornment } from '@material-ui/core'\nimport { Search } from '@material-ui/icons'\n\nconst styles = createStyles({\n    search: {\n        padding: '8px 0 8px 0',\n        textAlign: 'center',\n    },\n    input: {\n        width: '666px',\n    },\n})\n\ninterface SearchFormProps extends WithStyles<typeof styles> {\n    value: string\n    onSubmit: () => void\n    onChange: (value: string) => void\n}\n\n@observer\nclass SearchForm extends Component<SearchFormProps, {}> {\n    handleSubmit: FormEventHandler<HTMLFormElement> = e => {\n        e.preventDefault()\n        this.props.onSubmit()\n    }\n    handleChange: ChangeEventHandler<HTMLInputElement> = e => {\n        this.props.onChange(e.target.value)\n    }\n    render() {\n        const { value, classes } = this.props\n        return (\n            <div className={classes.search}>\n                <form onSubmit={this.handleSubmit}>\n                    <TextField\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    <Search />\n                                </InputAdornment>\n                            ),\n                        }}\n                        className={classes.input}\n                        label=\"歌名/歌手\"\n                        autoFocus\n                        value={value}\n                        onChange={this.handleChange}\n                        variant=\"outlined\"\n                    />\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default inject(({ searchStore }) => ({\n    value: searchStore.keywords,\n    onSubmit: searchStore.search.bind(searchStore),\n    onChange: searchStore.setKeyowrds.bind(searchStore),\n}))(withStyles(styles)(SearchForm))\n","import React from 'react'\nimport { List } from '@material-ui/core'\n\nimport { SongItemInjected } from '../injected-components'\nimport { ISong } from '../../interface'\n\nconst SongList = ({ songs }: { songs: ISong[] }) => (\n    <List>\n        {songs.map((song: ISong) => (\n            <SongItemInjected hideDriver={true} key={song.id + song.driver} song={song} />\n        ))}\n    </List>\n)\n\nexport default SongList\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { CircularProgress, withStyles, WithStyles, createStyles } from '@material-ui/core'\n\nimport SongList from './SongList'\nimport { SearchResult } from '../../stores/SearchStore'\n\nconst styles = createStyles({\n    resultItem: {\n        marginRight: '24px',\n        width: '50%',\n    },\n    header: {\n        padding: '0 16px',\n    },\n})\n\ninterface ResultItemProps extends WithStyles<typeof styles> {\n    result: SearchResult\n}\n\nconst ResultItem = observer(({ result, classes }: ResultItemProps) => (\n    <div className={classes.resultItem}>\n        <div className={classes.header}>\n            <h2>{result.title}</h2>\n        </div>\n        {result.searching && <CircularProgress />}\n        <SongList songs={result.songs} />\n    </div>\n))\n\nexport default withStyles(styles)(ResultItem)\n","import React from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { withStyles, createStyles } from '@material-ui/core/styles'\nimport { WithStyles } from '@material-ui/core/styles/withStyles'\nimport { Theme } from '@material-ui/core/styles/createMuiTheme'\n\nimport ResultItem from './ResultItem'\nimport { SearchResult } from '../../stores/SearchStore'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        resultList: {\n            display: 'flex',\n        },\n    })\n\ninterface ResultListProps extends WithStyles<typeof styles> {\n    results: SearchResult[]\n}\n\nconst ResultList = ({ results, classes }: ResultListProps) => (\n    <div className={classes.resultList}>\n        {results.map((result: SearchResult) => (\n            <ResultItem key={result.title} result={result} />\n        ))}\n    </div>\n)\n\nconst ObserverResultList = observer(ResultList)\nconst StyledObserverResultList = withStyles(styles)(ObserverResultList)\nexport default inject(({ searchStore }) => ({ results: searchStore.result }))(StyledObserverResultList)\n","import React from 'react'\nimport SearchForm from './SearchForm'\nimport ResultList from './ResultList'\n\nconst Search = () => (\n    <div>\n        <SearchForm />\n        <ResultList />\n    </div>\n)\n\nexport default Search\n","import React from 'react'\nimport { withStyles, createStyles } from '@material-ui/core'\nimport { WithStyles, Theme } from '@material-ui/core'\n\nconst styles = (theme: Theme) =>\n    createStyles({\n        header: {\n            marginBottom: '16px',\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'flex-end',\n        },\n        title: {\n            fontSize: '24px',\n        },\n        actions: {\n            display: 'flex',\n            '&>*': {\n                marginRight: '8px',\n            },\n        },\n    })\n\ninterface PanelProps extends WithStyles<typeof styles> {\n    title: string | React.ReactNode\n    actions?: React.ReactNode\n    children: React.ReactNode\n}\n\nconst Panel = ({ title, children, classes, actions }: PanelProps) => (\n    <div>\n        <div className={classes.header}>\n            <div className={classes.title}>{title}</div>\n            <div className={classes.actions}>{actions}</div>\n        </div>\n        <div>{children}</div>\n    </div>\n)\n\nexport default withStyles(styles)(Panel)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { inject, observer } from 'mobx-react'\nimport { RouteChildrenProps } from 'react-router'\nimport { List, IconButton, Button } from '@material-ui/core'\nimport { Delete, PlayArrow, Add } from '@material-ui/icons'\n\nimport Panel from '../../components/Panel'\nimport { SongItemInjected } from '../injected-components'\nimport { ISonglist, ISong } from '../../interface'\n\ninterface SonglistProps extends RouteChildrenProps<{ title: string }> {\n    songlists: ISonglist[]\n    onPlayAll(songs: ISong[], title: string): void\n    onAddToPlaylist(songs: ISong[], title: string): void\n    onRemove(title: string, driver: string, id: string | number): void\n}\n\n@observer\nclass Songlist extends React.Component<SonglistProps> {\n    getSonglistTitle = () => {\n        const { match } = this.props\n        return match!.params.title\n    }\n    getSonglist = () => {\n        const { songlists } = this.props\n        const title = this.getSonglistTitle()\n        const songlist = songlists.find(item => item.title === title)!\n        return songlist\n    }\n    handlePlayAllClick: React.MouseEventHandler = () => {\n        const title = this.getSonglistTitle()\n        const songlist = this.getSonglist()\n        this.props.onPlayAll(songlist.items, title)\n    }\n    handleAddToPlaylistClick: React.MouseEventHandler = () => {\n        const title = this.getSonglistTitle()\n        const songlist = this.getSonglist()\n        this.props.onAddToPlaylist(songlist.items, title)\n    }\n\n    render() {\n        const { onRemove } = this.props\n        const songlist = this.getSonglist()\n        return (\n            <Panel\n                title={songlist.title}\n                actions={[\n                    <Button key=\"playAll\" variant=\"contained\" size=\"small\" onClick={this.handlePlayAllClick}>\n                        <PlayArrow fontSize=\"small\" />\n                        全部播放\n                    </Button>,\n                    <Button key=\"addToPlaylist\" variant=\"contained\" size=\"small\" onClick={this.handleAddToPlaylistClick}>\n                        <Add fontSize=\"small\" />\n                        加入播放列表\n                    </Button>,\n                ]}\n            >\n                {songlist.items.length === 0 ? (\n                    <div>\n                        暂无歌曲，去<Link to=\"/search\">添加</Link>\n                    </div>\n                ) : (\n                    <List>\n                        {songlist.items.map(\n                            song =>\n                                song.flag !== 'deleted' && (\n                                    <SongItemInjected\n                                        key={song.id + song.driver}\n                                        song={song}\n                                        extendAction={\n                                            <IconButton onClick={e => onRemove(songlist.title, song.driver, song.id)}>\n                                                <Delete fontSize=\"small\" />\n                                            </IconButton>\n                                        }\n                                    />\n                                )\n                        )}\n                    </List>\n                )}\n            </Panel>\n        )\n    }\n}\n\nexport default inject(({ songlistStore, playlistStore, snackbarStore }) => ({\n    songlists: songlistStore.songlists,\n    onPlayAll: (songs: ISong[], title: string) => {\n        playlistStore.append(songs, true)\n        snackbarStore.success(`${title} 已添加到 {播放列表}`)\n    },\n    onAddToPlaylist: (songs: ISong[], title: string) => {\n        playlistStore.append(songs, false)\n        snackbarStore.success(`${title} 已添加到 {播放列表}`)\n    },\n    onRemove: (title: string, driver: string, id: string | number) => songlistStore.popSonglist(title, driver, id),\n}))(Songlist)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { inject, observer } from 'mobx-react'\nimport { List, IconButton, Button } from '@material-ui/core'\nimport { Delete } from '@material-ui/icons'\n\nimport Panel from '../../components/Panel'\nimport { PlaylistItemInjected } from '../injected-components'\nimport { ISong } from '../../interface'\n\ninterface PlaylistProps {\n    songs: ISong[]\n    onRemove(index: number): void\n    onClear(): void\n}\n\n@observer\nclass Playlist extends React.Component<PlaylistProps> {\n    render() {\n        const { songs, onRemove, onClear } = this.props\n        return (\n            <Panel\n                title=\"播放列表\"\n                actions={\n                    <Button variant=\"contained\" size=\"small\" onClick={onClear}>\n                        <Delete fontSize=\"small\" />\n                        清空\n                    </Button>\n                }\n            >\n                {songs.length === 0 ? (\n                    <div>\n                        暂无歌曲，去<Link to=\"/search\">添加</Link>\n                    </div>\n                ) : (\n                    <List>\n                        {songs.map((song, index) => (\n                            <PlaylistItemInjected\n                                key={song.id + song.driver}\n                                song={song}\n                                extendAction={\n                                    <IconButton onClick={e => onRemove(index)}>\n                                        <Delete fontSize=\"small\" />\n                                    </IconButton>\n                                }\n                            />\n                        ))}\n                    </List>\n                )}\n            </Panel>\n        )\n    }\n}\n\nexport default inject(({ playlistStore }) => ({\n    songs: playlistStore.availableSongs,\n    onClear: () => playlistStore.clear(),\n    onRemove: (index: number) => playlistStore.remove(index),\n}))(Playlist)\n","import React from 'react'\nimport { inject } from 'mobx-react' // eslint-disable-line\nimport qs from 'query-string'\nimport { CircularProgress } from '@material-ui/core'\nimport { RouteChildrenProps } from 'react-router'\nimport RootStore from '../../stores/RootStore'\n\ninterface GithubProps extends RouteChildrenProps<{ code: string }> {\n    authorizeURL: string\n    getAccessToken(code: string): Promise<string>\n}\n\nclass Github extends React.Component<GithubProps> {\n    componentDidMount() {\n        const { location, history, authorizeURL, getAccessToken } = this.props\n        const { search } = location\n        const { code } = qs.parse(search)\n        if (code) {\n            getAccessToken(code as string).then(token => {\n                if (window.opener) {\n                    ;(window.opener.baiyezi_music_store as RootStore).githubStore.oauthSuccess(token)\n                    window.close()\n                }\n            })\n        } else {\n            window.location.replace(authorizeURL)\n        }\n    }\n    render() {\n        return (\n            <div style={{ textAlign: 'center', marginTop: 100 }}>\n                <CircularProgress />\n            </div>\n        )\n    }\n}\n\nexport default inject(({ githubStore }) => ({\n    authorizeURL: githubStore.authorizeURL,\n    getAccessToken: githubStore.getAccessToken.bind(githubStore) as ((code: string) => Promise<string>),\n}))(Github)\n","import RootStore from './RootStore'\nimport { observable, action, flow } from 'mobx'\n\nimport { IDriver, ISong, ISearchResult } from '../interface'\n\nexport interface DriverInstance {\n    title: string\n    instance: IDriver\n}\n\nexport class SearchResult {\n    @observable searching: boolean = true\n    @observable title: string = ''\n    @observable total: number = 0\n    @observable songs: ISong[] = []\n}\n\nexport default class SearchStore {\n    root: RootStore\n    @observable keywords: string = '雪落下的声音'\n    @observable result: SearchResult[] = []\n\n    constructor(root: RootStore) {\n        this.root = root\n    }\n\n    @action\n    setKeyowrds(keyowrds: string) {\n        this.keywords = keyowrds\n    }\n\n    @action\n    search() {\n        this.result = []\n        this.root.driverStore.drivers.forEach(d => this.runDriver(d))\n    }\n\n    runDriver = flow(function*(this: SearchStore, driver: DriverInstance) {\n        const resultItem = new SearchResult()\n        resultItem.title = driver.title\n        this.result.push(resultItem)\n        const { total, list }: ISearchResult = yield driver.instance.search(this.keywords, 1, 20)\n        resultItem.total = total\n        resultItem.songs = list\n        resultItem.searching = false\n    })\n}\n","import RootStore from './RootStore'\n\nimport { IDriverInstance } from '../interface'\n\nexport default class DriverStore {\n    root: RootStore\n    drivers: IDriverInstance[] = []\n\n    constructor(root: RootStore) {\n        this.root = root\n        this.scanDrivers()\n    }\n\n    scanDrivers() {\n        const context = require.context('../drivers/', false, /\\.ts$/)\n        const drivers = context.keys().map(key => {\n            const DriverClass = context(key).default\n            return <IDriverInstance>{ title: DriverClass.title, instance: new DriverClass() }\n        })\n        this.drivers = drivers\n    }\n}\n","import RootStore from './RootStore'\nimport { action, computed, flow, autorun, observable } from 'mobx'\nimport { ISong } from '../interface'\n\nexport default class PlaylistStore {\n    root: RootStore\n    // 播放清单\n    @observable songs: ISong[] = []\n    get availableSongs() {\n        return this.songs.filter(s => s.flag !== 'deleted')\n    }\n    // 清单存储到storage的key\n    storageKey = 'baiyezi-playlist'\n\n    constructor(root: RootStore) {\n        this.root = root\n        this.load()\n        autorun(() => this.save())\n    }\n\n    save() {\n        const playlistJSON = JSON.stringify(this.songs)\n        localStorage.setItem(this.storageKey, playlistJSON)\n    }\n    load() {\n        const playlistJSON = localStorage.getItem(this.storageKey) || '[]'\n        const saveData = JSON.parse(playlistJSON)\n        this.songs = saveData || this.songs\n    }\n\n    // 添加一首歌到播放列表\n    @action\n    add(item: ISong, play: boolean = false) {\n        const predicate = (song: ISong) => song.id === item.id && song.driver === item.driver\n        const oldIndex = this.songs.findIndex(predicate)\n        let playIndex = oldIndex\n        if (oldIndex === -1) {\n            item.flag = 'created'\n            this.songs.push(item)\n            playIndex = this.songs.length - 1\n        }\n        if (play) {\n            this.root.playerStore.playlistIndex = playIndex\n        }\n    }\n\n    @action\n    append(songs: ISong[], play: boolean = false) {\n        for (let i = 0; i < songs.length; i++) {\n            i === 0 && play ? this.add(songs[i], true) : this.add(songs[i])\n        }\n    }\n\n    // 清空播放列表\n    @action\n    clear() {\n        // this.songs = []\n        this.songs.forEach(s => (s.flag = 'deleted'))\n        this.root.playerStore.src = ''\n        this.root.playerStore.playlistIndex = 0\n    }\n\n    // 删除某一首歌\n    @action\n    remove(index: number) {\n        this.songs[index].flag = 'deleted'\n        // this.songs.splice(index, 1)\n        if (index === this.root.playerStore.playlistIndex) {\n            this.root.playerStore.fetchSrc()\n        } else if (index < this.root.playerStore.playlistIndex) {\n            this.root.playerStore.playlistIndex--\n        }\n    }\n}\n","import RootStore from './RootStore'\nimport { observable, action, autorun, toJS } from 'mobx'\nimport { ISonglist, ISong } from '../interface'\n\nexport default class SonglistStore {\n    root: RootStore\n\n    @observable songlists: ISonglist[] = []\n\n    songlistsStorageKey = 'baiyezi-songlists'\n\n    constructor(root: RootStore) {\n        this.root = root\n        // 加载本地数据\n        const songlistsJSON = localStorage.getItem(this.songlistsStorageKey) || '[]'\n        this.songlists = JSON.parse(songlistsJSON)\n\n        autorun(() => {\n            const songlistsJSON = JSON.stringify(this.songlists)\n            localStorage.setItem(this.songlistsStorageKey, songlistsJSON)\n        })\n    }\n\n    @action\n    createSonglist(title: string) {\n        if (title) {\n            if (this.songlists.some(item => item.title === title)) {\n                throw new Error(`歌单名已存在`)\n            } else {\n                this.songlists.push({ title, items: [], flag: 'created' })\n            }\n        }\n    }\n    @action\n    renameSonglist(oldTitle: string, newTitle: string) {\n        let songlist = this.songlists.find(pl => pl.title === oldTitle)!\n        songlist.title = newTitle\n\n        // 维护和远端的同步关系\n        songlist.flag = 'created'\n        this.songlists.push({ flag: 'deleted', title: oldTitle, items: [] })\n    }\n    @action\n    deleteSonglist(title: string) {\n        // this.songlists = this.songlists.filter(pl => pl.title !== title)\n        this.songlists.find(sl => sl.title === title)!.flag = 'deleted'\n    }\n    @action\n    pushSonglist(title: string, item: ISong) {\n        const songlist = this.songlists.find(pl => pl.title === title)!\n        const predicate = (song: ISong) => song.id === item.id && song.driver == item.driver\n        const oldIndex = songlist.items.findIndex(predicate)\n        if (oldIndex === -1) {\n            item.flag = 'created'\n            songlist.items.push(item)\n        }\n    }\n    @action\n    popSonglist(title: string, driver: string, id: string | number) {\n        const songlist = this.songlists.find(pl => pl.title === title)!\n        // songlist.items = songlist.items.filter(pli => pli.driver !== driver || pli.id !== id)\n        songlist.items.find(sli => sli.driver === driver && sli.id === id)!.flag = 'deleted'\n    }\n}\n","import RootStore from './RootStore'\nimport { observable, action } from 'mobx'\nimport { SnackbarVariant } from '../interface'\n\ninterface ISnackMessage {\n    key: number\n    message: string\n    variant: SnackbarVariant\n}\nexport default class SnackbarStore {\n    root: RootStore\n\n    @observable key: number = new Date().valueOf()\n    @observable open: boolean = false\n    @observable message: string = ''\n    @observable variant: SnackbarVariant = 'info'\n    queue: ISnackMessage[] = []\n\n    constructor(root: RootStore) {\n        this.root = root\n    }\n    @action close() {\n        this.open = false\n    }\n    @action push(message: string, variant: SnackbarVariant) {\n        this.queue.push({ message, variant, key: new Date().valueOf() })\n        if (this.open) {\n            this.open = false\n        } else {\n            this.show()\n        }\n    }\n    @action show() {\n        if (this.queue.length > 0) {\n            const content = this.queue.shift()!\n            this.message = content.message\n            this.variant = content.variant\n            this.open = true\n        }\n    }\n    @action success(message: string) {\n        this.push(message, 'success')\n    }\n    @action warning(message: string) {\n        this.push(message, 'warning')\n    }\n    @action error(message: string) {\n        this.push(message, 'error')\n    }\n    @action info(message: string) {\n        this.push(message, 'info')\n    }\n}\n","import RootStore from './RootStore'\nimport { observable, action, flow, autorun, observe } from 'mobx'\n\nexport default class PlayerStore {\n    root: RootStore\n    // 播放器设置存储到storage的key\n    storageKey = 'baiyezi-player'\n\n    // 播放模式\n    @observable mode: 'single' | 'list' | 'order' | 'random' = 'list'\n\n    // 暂停\n    @observable paused: boolean = true\n\n    // 静音\n    @observable muted: boolean = false\n\n    // 音量\n    @observable volume: number = 100\n\n    // 总时长\n    @observable duration: number = 0\n\n    // 播放进度\n    @observable currentTime: number = 0\n\n    @observable src: string = ''\n    @observable playlistIndex: number = 0\n\n    get playlist() {\n        return this.root.playlistStore.availableSongs\n    }\n    // 当前播放的歌曲\n    get currentSong() {\n        return this.playlist[this.playlistIndex]\n    }\n\n    constructor(root: RootStore) {\n        this.root = root\n        this.load()\n        autorun(() => this.save())\n        observe(this, 'playlistIndex', change => this.fetchSrc())\n        if (this.playlist.length > this.playlistIndex) {\n            this.fetchSrc()\n        } else {\n            this.currentTime = 0\n            this.duration = 0\n            this.playlistIndex = 0\n            this.src = ''\n        }\n    }\n\n    save() {\n        const playerJSON = JSON.stringify({\n            muted: this.muted,\n            volume: this.volume,\n            duration: this.duration,\n            currentTime: this.currentTime,\n            mode: this.mode,\n            src: this.src,\n            playlistIndex: this.playlistIndex,\n        })\n        localStorage.setItem(this.storageKey, playerJSON)\n    }\n    load() {\n        const playerJSON = localStorage.getItem(this.storageKey) || '{}'\n        const saveData = JSON.parse(playerJSON)\n        this.muted = saveData.muted || this.muted\n        this.volume = saveData.volume || this.volume\n        this.duration = saveData.duration || this.duration\n        this.currentTime = saveData.currentTime || this.currentTime\n        this.mode = saveData.mode || this.mode\n        this.playlistIndex = saveData.playlistIndex || this.playlistIndex\n        this.src = saveData.src || this.src\n    }\n\n    @action\n    changePaused(paused: boolean) {\n        this.paused = paused\n    }\n    @action\n    changeMuted(muted: boolean) {\n        this.muted = muted\n    }\n    @action\n    changeVolume(volume: number) {\n        this.volume = volume\n        this.muted = volume === 0\n    }\n    @action\n    changeMode(mode: 'single' | 'list' | 'order' | 'random') {\n        this.mode = mode\n    }\n    @action\n    changeDuration(duration: number) {\n        this.duration = duration\n    }\n    @action\n    changeCurrentTime(currentTime: number) {\n        this.currentTime = currentTime\n    }\n\n    @action\n    playNext() {\n        const playlistLength = this.playlist.length\n        switch (this.mode) {\n            case 'single':\n                this.src += ' '\n                break\n            case 'list':\n                this.playlistIndex = this.playlistIndex < playlistLength - 1 ? this.playlistIndex + 1 : 0\n                break\n            case 'order':\n                if (this.playlistIndex < playlistLength - 1) this.playlistIndex = this.playlistIndex + 1\n                break\n            case 'random':\n                this.playlistIndex = Math.round(Math.random() * (playlistLength - 1))\n                break\n        }\n    }\n\n    @action\n    playPrev() {\n        const playlistLength = this.playlist.length\n        switch (this.mode) {\n            case 'single':\n                this.src += ' '\n                break\n            case 'list':\n                this.playlistIndex = this.playlistIndex > 0 ? this.playlistIndex - 1 : playlistLength - 1\n                break\n            case 'order':\n                if (this.playlistIndex > 0) this.playlistIndex = this.playlistIndex - 1\n                break\n            case 'random':\n                this.playlistIndex = Math.round(Math.random() * (playlistLength - 1))\n                break\n        }\n    }\n\n    fetchSrc = flow(function*(this: PlayerStore) {\n        if (this.currentSong) {\n            const driver = this.root.driverStore.drivers.find(item => item.title === this.currentSong.driver)\n            const src = yield driver!.instance.find(this.currentSong.id)\n            this.src = src\n        } else {\n            this.src = ''\n        }\n    })\n}\n","import qs from 'query-string'\n\nexport default class OAuth {\n    clientID: string\n    clientSecret: string\n    redirectURL: string\n    scope: string\n    url = {\n        authorize: 'https://github.com/login/oauth/authorize',\n        access_token: 'https://github.com/login/oauth/access_token',\n        cross_origin: 'https://cros.662.workers.dev',\n    }\n\n    constructor(clientID: string, clientSecret: string, redirectURL: string, scope: string) {\n        this.clientID = clientID\n        this.clientSecret = clientSecret\n        this.redirectURL = redirectURL\n        this.scope = scope\n    }\n    getAuthorizeURL(state = '') {\n        const queryString = qs.stringify({ client_id: this.clientID, scope: this.scope, state })\n        return `${this.url.authorize}?${queryString}`\n    }\n    getAccessTokenURL(code: string) {\n        const query = { client_id: this.clientID, client_secret: this.clientSecret, code }\n        const queryString = qs.stringify(query)\n        // return `${this.url.access_token}?${queryString}`\n        return `${this.url.cross_origin}/${this.url.access_token}?${queryString}`\n    }\n    async getAccessToken(code: string) {\n        const url = this.getAccessTokenURL(code)\n        const response = await fetch(url)\n        const responseText = await response.text()\n        const { access_token } = qs.parse(responseText)\n        return <string>access_token\n    }\n}\n","import Github from 'github-api'\n\nclass GithubHelper {\n    github: Github\n\n    constructor(github: Github) {\n        this.github = github\n    }\n\n    async createGist(description: string, files: any) {\n        const { data } = await this.github.getGist().create({\n            public: false,\n            description: description,\n            files: files,\n        })\n\n        return data\n    }\n\n    async updateGistFiles(id: number, files: any) {\n        const gist = this.github.getGist(id)\n        return await gist.update({ files })\n    }\n\n    async findMyGistByDescription(description: string) {\n        const response = await this.github.getUser().listGists()\n        const myGists = response.data || []\n        const gist = myGists.find((g: any) => g.description === description)\n        return gist\n    }\n\n    async findGistById(id: number) {\n        const { data } = await this.github.getGist(id).read()\n        return data\n    }\n}\n\nexport default GithubHelper\n","import Github from 'github-api'\nimport Helper from './Helper'\nimport { ISong, ISonglist, ISync } from '../interface'\n\nexport default class Sync {\n    helper?: Helper\n    github?: Github\n    storeName = 'baiyezi-music'\n    storeGistID?: number\n\n    constructor(token: string) {\n        this.github = new Github({ token })\n        this.helper = new Helper(this.github)\n    }\n\n    async createStore() {\n        return await this.helper!.createGist(this.storeName, {\n            'playlist.json': { content: '[]' },\n            'songlist.json': { content: '[]' },\n        })\n    }\n\n    async getStore() {\n        if (!this.helper) throw new Error('尚未获得github授权')\n\n        let store: any = null\n        if (this.storeGistID) {\n            store = await this.helper.findGistById(this.storeGistID)\n        } else {\n            store = await this.helper.findMyGistByDescription('baiyezi-music')\n            if (store) {\n                store = await this.helper.findGistById(store.id)\n            } else {\n                store = await this.createStore()\n            }\n        }\n        return store\n    }\n    async syncPlaylist(local: ISong[]) {\n        const store = await this.getStore()\n        const remote = JSON.parse(store.files[`playlist.json`].content)\n        const merged: ISong[] = this.mergeSongs(local, remote)\n        await this.helper!.updateGistFiles(store.id, {\n            'playlist.json': { content: JSON.stringify(merged, null, 4) },\n        })\n        return merged\n    }\n    async syncSonglist(local: ISonglist[]) {\n        const store = await this.getStore()\n        const remote = JSON.parse(store.files[`songlist.json`].content)\n        const merged: ISonglist[] = this.mergeSonglists(local, remote)\n        await this.helper!.updateGistFiles(store.id, {\n            'songlist.json': { content: JSON.stringify(merged, null, 4) },\n        })\n        return merged\n    }\n\n    mergeSonglists(local: ISonglist[], remote: ISonglist[]) {\n        const merged = this.merge(local, remote, a => b => a.title === b.title)\n        merged.forEach(m => {\n            const remoteItems = remote.find(r => r.title === m.title)\n            if (remoteItems) {\n                m.items = this.merge(m.items, remoteItems.items, a => b => a.id === b.id && a.driver === b.driver)\n            }\n        })\n        return merged\n    }\n\n    mergeSongs(local: ISong[], remote: ISong[]) {\n        return this.merge(local, remote, a => b => a.id === b.id && a.driver === b.driver)\n    }\n\n    merge<T extends ISync>(local: T[], remote: T[], filter: (a: T) => (b: T) => boolean) {\n        const merged = JSON.parse(JSON.stringify(local)) as T[]\n        remote.forEach(r => {\n            // 远端有 & 本地无 -> 增加\n            // 表示数据在远端被新增\n            if (!merged.some(filter(r))) {\n                merged.push(r)\n            }\n        })\n\n        const deleted: number[] = []\n        merged.forEach((m, i) => {\n            if (remote.some(filter(m))) {\n                // 远端有 & 本地被标记删除 -> 删除\n                // 表示数据在本地被删除\n                if (m.flag === 'deleted') deleted.push(i)\n            } else {\n                // 远端无 & 本地未被标记新增 -> 删除\n                // 表示数据在远端被删除\n                if (m.flag !== 'created') deleted.push(i)\n            }\n            delete m.flag\n        })\n        deleted.forEach(d => merged.splice(d, 1))\n        return merged\n    }\n}\n","import RootStore from './RootStore'\nimport { observable, action, flow, autorun } from 'mobx'\nimport OAuth from '../github/OAuth'\nimport GithubSync from '../github/Sync'\n\nexport default class GithubStore {\n    root: RootStore\n    oauth: OAuth\n    authorizeURL: string\n    githubSync?: GithubSync\n\n    // github oauth token\n    @observable token: string = ''\n\n    @observable syncing: boolean = false\n\n    constructor(root: RootStore) {\n        this.root = root\n        this.oauth = new OAuth('8353b545fe018f2066ef', '838e759c5f223e2604e0ae3126b6f6eec48843a9', '/', 'user gist')\n        this.authorizeURL = this.oauth.getAuthorizeURL()\n        const token = localStorage.getItem('github-token')\n        if (token) {\n            this.token = token\n            this.githubSync = new GithubSync(token)\n        }\n        autorun(() => localStorage.setItem('github-token', this.token))\n    }\n\n    @action\n    oauthSuccess(token: string) {\n        this.token = token\n        this.githubSync = new GithubSync(token)\n        this.sync()\n    }\n\n    sync = flow(function*(this: GithubStore) {\n        this.syncing = true\n        this.root.playlistStore.songs = yield this.githubSync!.syncPlaylist(this.root.playlistStore.songs)\n        this.root.songlistStore.songlists = yield this.githubSync!.syncSonglist(this.root.songlistStore.songlists)\n        this.syncing = false\n    })\n\n    getAccessToken = flow(function*(this: GithubStore, code: string) {\n        this.token = yield this.oauth.getAccessToken(code)\n        return this.token\n    })\n}\n","import React from 'react'\nimport { Router, Route, Redirect, Switch } from 'react-router-dom'\nimport { Provider } from 'mobx-react'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\n\nimport Layout from './layout'\nimport Search from './search'\nimport Songlist from './songlist'\nimport Playlist from './playlist'\nimport Github from './oauth/Github'\n\nimport history from '../../src/history'\nimport RootStore from '../stores/RootStore'\n\nconst store = new RootStore()\nwindow.baiyezi_music_store = store\n\nconst theme = createMuiTheme({\n    typography: {\n        useNextVariants: true,\n    },\n    palette: {\n        // type: 'dark',\n    },\n})\n\nexport default function index() {\n    return (\n        <Provider {...store}>\n            <Router history={history}>\n                <Switch>\n                    <Route path=\"/oauth/github\" component={Github} />\n                    <MuiThemeProvider theme={theme}>\n                        <Layout>\n                            <Switch>\n                                <Route path=\"/search\" component={Search} />\n                                <Route path=\"/playlist\" component={Playlist} />\n                                <Route path=\"/songlist/:title\" component={Songlist} />\n                                <Redirect path=\"/\" to=\"/search\" />\n                            </Switch>\n                        </Layout>\n                    </MuiThemeProvider>\n                </Switch>\n            </Router>\n        </Provider>\n    )\n}\n","import SearchStore from './SearchStore'\nimport DriverStore from './DriverStore'\nimport PlaylistStore from './PlaylistStore'\nimport SonglistStore from './SonglistStore'\nimport SnackbarStore from './SnackbarStore'\nimport PlayerStore from './PlayerStore'\nimport GithubStore from './GithubStore'\n\nexport default class RootStore {\n    driverStore: DriverStore\n    searchStore: SearchStore\n    playlistStore: PlaylistStore\n    songlistStore: SonglistStore\n    snackbarStore: SnackbarStore\n    playerStore: PlayerStore\n    githubStore: GithubStore\n\n    constructor() {\n        this.driverStore = new DriverStore(this)\n        this.searchStore = new SearchStore(this)\n        this.playlistStore = new PlaylistStore(this)\n        this.songlistStore = new SonglistStore(this)\n        this.snackbarStore = new SnackbarStore(this)\n        this.playerStore = new PlayerStore(this)\n        this.githubStore = new GithubStore(this)\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === '[::1]' ||\n        // 127.0.0.1/8 is considered localhost for IPv4.\n        window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n)\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config)\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log('This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA')\n                })\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config)\n            }\n        })\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing\n                if (installingWorker == null) {\n                    return\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log('New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA.')\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration)\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.')\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration)\n                            }\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => {\n            console.error('Error during service worker registration:', error)\n        })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl)\n        .then(response => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type')\n            if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then(registration => {\n                    registration.unregister().then(() => {\n                        window.location.reload()\n                    })\n                })\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config)\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.')\n        })\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister()\n        })\n    }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './app'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}